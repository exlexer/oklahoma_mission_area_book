<div ui-view>
	<div class="content">
		
		<h1>Mission Areas</h1>

		<!-- Zone Div -->
		<div ng-repeat="(key, val) in zones" class="row-box" ng-drop="changing === 'dist'" ng-drop-success="distDrop($data,$event,val.id)">
			<div class="main row">
				<div>
					{{ val.name }}
					<i class="material-icons" ng-class="{flip: activeZone === val.id }" ng-click='showZone(val.id)'>keyboard_arrow_down</i>
				</div>
			</div>
			<div ng-show='activeZone === val.id'>

				<!-- District Div -->
				<div ng-repeat='val in filter(districts, activeZone, "zoneId")' ng-drop="changing === 'area'">
					<div class="secondary row" ng-drag="true" ng-drag-data="{ id: val.id, type : 'dist' }" ng-drag-start="onDrag($data,$event)">
						{{ val.name }}
						<i class="material-icons" ng-class="{ flip: activeDistrict === val.id }" ng-click='showDistrict(val.id)'>keyboard_arrow_down</i>
					</div>
					<div ng-show='activeDistrict === val.id'>

						<!-- Area Div -->
						<div ng-repeat='val in filter(areas, activeDistrict, "districtId")' class='third row' ng-drag="true" ng-drag-data="{ id: val.id, type : 'dist' }" ng-drag-start="onDrag($data,$event)">
							{{ val.name }}


							<!-- District Div -->
							<div ng-repeat='val in filter(miss, val.id, "areaId")' class="missionary">{{val.name}}</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<h1>Church Units</h1>
	
		<div ng-repeat="(key, value) in stakes" class="row-box">
			<div class="main row">
				<div>
					{{ value.name }}
					<i class="material-icons" ng-class="{flip: activeStake === value.id }" ng-click='showStake(value.id)'>keyboard_arrow_down</i>
				</div>
			</div>
			<div ng-show='activeStake === value.id'>
				<div ng-repeat='(key, value) in filter(units, activeStake, "stakeId")' class='secondary row'>
					{{ value.name }}
					<i class="material-icons" ng-click=''>edit</i>
				</div>
			</div>
		</div>

	</div>


<!-- SECTION FOR ADDING NEW AREA -->
<div class="save" ng-click="save()" ng-show="changed">+</div>
<div class="add" ng-click="add()" ng-class="{adding: adding}">+</div>
	<div class="add-box" ng-show="adding">
		<p>
			<select ng-model='types'>
				<option value="0">Zone</option>
				<option value="1">District</option>
				<option value="2">Area</option>
			</select>
		</p>
			<p ng-show="types == 0 || types == 1 || types == 2">
				<input type='text' ng-model='newArea.name' placeholder='Name'>
			</p>
			<p ng-show="types == 0">
				<select ng-model="newArea.stakeId">
  				<option ng-repeat='(key, value) in stakes' value="{{ value.id  }}">{{ value.name }}</option>
				</select>
			</p>
			<p ng-show="types == 1">
				<select ng-model="newArea.zoneId">
  				<option ng-repeat='(key, value) in zones' value="{{ value.id }}">{{ value.name }}</option>
				</select>
			</p>
			<p ng-show="types == 2">
				<select ng-model="newArea.districtId">
  				<option ng-repeat='(key, value) in districts' value="{{ value.id }}">{{ value.name }}</option>
				</select>
			</p>
			<p ng-show="types == 2">
				<select ng-model="newArea.unitId" multiple>
  				<option ng-repeat='(key, value) in units' value="{{ value.id }}">{{ value.name }}</option>
				</select>
			</p>
			<p ng-show="types == 2">
				<input ng-model='newArea.phone' placeholder='Phone Number'>
			</p>
			<p ng-show="types == 2">
				<input ng-model='newArea.phoneTwo' placeholder='Secondary Phone Number'>
			</p>
			<button ng-click="addArea()">Add</button>
	</div>
</div>